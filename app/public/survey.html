	<!DOCTYPE html>
<html>
<head>
	<title>Survey</title>
<!-- Jquery CDN  -->
<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<!-- Bootstrap JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>
<body>

<!-- Name and Image  -->
<div class="container">
	<form name="myForm">
		<div class="input-group">
	  		<div>
		  		Name<input id="name" type="text" class="form-control" name="name">
	  		</div>
	  		<div>
		  		Image<input id="image" type="text" class="form-control" name="img">
	  		</div>
	  		<input class="submit" type="submit" name="Submit">
		</div>
	</form>
</div>
<br><br><br><br>
<!-- Questions -->
<div class="container">
	<!-- Question 1	 -->
	<div class="dropdown">Question 1
	  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
	    Select an Option
	    <span class="caret"></span>
	  </button>
	  <ul class="dropdown-menu q1" data-type='q1'>
	    <li value="1"><a href="#">Strongly Agree</a></li>
	    <li value="2"><a href="#">Agree</a></li>
	    <li value="3"><a href="#">Disagree</a></li>
	    <li value="4"><a href="#">Stronglee Disagree</a></li>
	  </ul>
	</div>
	
	<br><br><br>

	<!-- Question 2 -->
	<div class="dropdown">Question 2
	  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
	    Select an Option
	    <span class="caret"></span>
	  </button>
	  <ul  class="dropdown-menu q2" data-type="q2">
	    <li value="1"><a href="#">Strongly Agree</a></li>
	    <li value="2"><a href="#">Agree</a></li>
	    <li value="3"><a href="#">Disagree</a></li>
	    <li value="4"><a href="#">Stronglee Disagree</a></li>
	  </ul>
	</div>
</div>

<!-- Capturing users chooice -->
<script type="text/javascript">
$(document).ready(function() {
		var q1 = 0;
		var q2 = 0;
		var name = '';
		var img = ''; 

		//Replaces the default "Select option with users choice" 
		$(".dropdown-menu li a").click(function(){
		  $(this).parents(".dropdown").find('.btn').html($(this).text() + ' <span class="caret"></span>');
		});

		// gets question input value
		 $('.q1 li').on('click', function() {
		 	q1 = $(this).val();
		 });
		 $('.q2 li').on('click', function() {
		 	q2 = $(this).val();
		 });

		 // When Submit button is clicked ......
			$('.submit').on('click', function() {
				// Validation
					let qCount = q1 + q2;
					const isName = document.forms["myForm"]["name"].value;
				    const isImg = document.forms["myForm"]["img"].value;
				    if (isName == "" || isImg == "" || qCount < 2) {
				        alert("All fields must be filled out");
				        return false;
				    }
				    else {
						  var personData = {
						    "name": $('#name').val().trim(),
						    "photo":$('#image').val().trim(),
						    "scores":[
								        q1,
								        q2
								      ]
						  }
						 $.post('/api/friend', personData, function(data) {
						 	$('#name').val("");
						 	$('#image').val("");
						 });
						 getFriendData(); 
						return false;
				    }
			}); 
		function getFriendData() {
			alert('Running');
			const currentURL = window.location.origin;
			$.ajax(
			{
				url: currentURL + '/api/friend',
				method: 'GET'
			})
			.done(function(data) {
				for(var i = 0; i < data.length; i++){
					console.log('===================');
					console.log('Name', data[i].name);
					console.log('score', data[i].scores);
					console.log('===================');
				}
			});
		}
		
}); 
</script>
</body>
</html>